<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fifa Leagues Master</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            color: #333;
        }
        .container {
            max-width: 90%;
            margin: 2rem auto;
            padding: 2rem;
            background-color: rgba(255, 255, 255, 0.85);
            border-radius: 1rem;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        h1, h2 {
            color: #00b894;
            font-weight: 700;
        }
        h1 { text-align: center; }
        h2 { text-align: left; }

        /* === ADD THIS NEW CSS === */
        .nav-link {
          background-color: #00b894;
          color: white !important; /* Use important to override Tailwind if needed */
          padding: 0.5rem 1rem;
          border-radius: 0.5rem;
          text-decoration: none;
          font-weight: 500;
          transition: all 0.2s ease-in-out;
          display: inline-block;
          border: 1px solid transparent;
        }

        .nav-link:hover {
          background-color: #00a884;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* Optional: Different color for admin button */
        .nav-link.admin-link {
          background-color: #e67e22;
        }
        .nav-link.admin-link:hover {
          background-color: #d35400;
        }


        .standings-section, .archive-section, .stats-section {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin-top: 1.5rem;
            border: 1px solid #e9ecef;
        }
        .standings-section h2, .archive-section h2, .stats-section h2 {
            margin-top: 0;
            color: #00b894;
            display: flex;
            align-items: center;
        }
        h2 .icon {
            margin-right: 0.75rem;
            font-size: 1.25rem;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
            white-space: nowrap;
        }
        th {
            background-color: #f8f9fa;
            font-weight: 500;
        }
        tr:hover {
            background-color: #f8f9fa;
        }
        .league-tab-button {
            padding: 0.75rem 1.5rem;
            background-color: #e9ecef;
            border: 1px solid #dee2e6;
            border-radius: 0.5rem 0.5rem 0 0;
            color: #495057;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .league-tab-button.active {
            background-color: #fff;
            border-bottom-color: #fff;
        }
        .hidden { display: none; }
        .league-tabs-container {
            display: flex;
            flex-wrap: wrap;
            border-bottom: 1px solid #dee2e6;
            margin-top: 1.5rem;
        }
        .rank-gold { background-color: rgba(255, 215, 0, 0.15); }
        .rank-silver { background-color: rgba(192, 192, 192, 0.15); }
        .rank-bronze { background-color: rgba(205, 127, 50, 0.15); }
        a.player-name-link {
            text-decoration: none;
            color: #00b894;
            font-weight: 500;
            transition: color 0.2s;
        }
        a.player-name-link:hover {
            text-decoration: underline;
            color: #00a884;
        }
        .match-of-the-week-item {
            background-color: rgba(255, 215, 0, 0.1);
            border-left: 3px solid #ffd700;
        }
        #motwContainer {
            border: 1px solid #00b894;
            background: linear-gradient(145deg, rgba(0, 184, 148, 0.05), rgba(0, 184, 148, 0.15));
        }
        #motwContainer h2 { color: #00b894; text-align: center;}
        
        #h2hButton {
            background-image: linear-gradient(to right, #00a884, #00b894);
            border: none;
            transition: all 0.3s ease;
            color: white;
        }
        #h2hButton:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
        }
        #h2hResult {
            border-top: 1px solid #dee2e6;
            padding-top: 1.5rem;
            margin-top: 1.5rem;
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: start;
            gap: 1rem;
        }
        .h2h-player-stats { text-align: center; }
        .h2h-player-name { font-size: 1.25rem; font-weight: bold; color: #00b894; }
        .h2h-stat-label { font-size: 0.875rem; color: #6c757d; margin-top: 0.5rem; }
        .h2h-stat-value { font-size: 1.5rem; font-weight: 700; color: #333 }
        .h2h-vs-divider { text-align: center; }
        .h2h-vs-divider p:first-child { font-size: 2rem; font-weight: bold; color: #00b894; }
        
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        .table-container::-webkit-scrollbar { height: 8px; }
        .table-container::-webkit-scrollbar-track { background: #e9ecef; border-radius: 10px; }
        .table-container::-webkit-scrollbar-thumb { background: #00b894; border-radius: 10px; }
        
        .league-content {
            animation: crossFade 0.4s ease-in-out;
        }

        .club-logo-sm {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            object-fit: cover;
            display: inline-block;
            vertical-align: middle;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes crossFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
                margin: 1rem auto;
                max-width: 100%;
            }
            h1 {
                font-size: 1.875rem;
            }
            #h2hResult {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            .h2h-vs-divider { display: none; }
        }
    </style>
</head>
<body>

    <header class="bg-white shadow-md w-full sticky top-0 z-10">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex flex-wrap justify-between items-center">
        
        <div class="text-center sm:text-left">
          <h1 class="text-3xl font-extrabold text-[#00b894]">Fifa Master</h1>
          <p class="text-xs text-gray-500 -mt-1"><span id="userIdDisplay">Loading...</span></p>
        </div>

        <nav class="flex items-center gap-2 mt-3 sm:mt-0 w-full sm:w-auto justify-center">
          <a href="live.html" class="nav-link">Live Matches</a>
          <a href="players.html" class="nav-link">All Players</a>
          <a href="stats.html" class="nav-link">Overall Stats</a>
          <a id="adminLink" href="admin.html" class="nav-link admin-link hidden">Admin Panel</a>
        </nav>

      </div>
    </header>
    <div class="container">
        <div id="mainContent">
            <div id="motwContainer" class="stats-section hidden"></div>
            <div id="leagueTabsContainer" class="league-tabs-container"></div>
            <div id="leagueContentContainer"></div>

            <div class="stats-section">
                <h2 class="text-2xl mb-4"><span class="icon">‚öîÔ∏è</span>Head-to-Head (All Leagues)</h2>
                <div class="flex flex-col sm:flex-row items-center gap-4">
                    <select id="h2hPlayer1Select" class="w-full rounded-md p-2"></select>
                    <span class="font-bold">vs</span>
                    <select id="h2hPlayer2Select" class="w-full rounded-md p-2"></select>
                    <button id="h2hButton" class="p-2 rounded-md w-full sm:w-auto">Compare</button>
                </div>
                <div id="h2hResult" class="mt-4 text-center"></div>
            </div>

            <div class="archive-section">
                <h2 class="text-2xl mb-4"><span class="icon">üìú</span>Match Archive</h2>
                <div id="matchList"></div>
            </div>
        </div>
    </div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, onSnapshot, collection } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        const firebaseConfig = {
          apiKey: "AIzaSyBvXdFou9yUlERH-iaICi6JjNChw1rC2O0",
          authDomain: "fun-league-6edd6.firebaseapp.com",
          projectId: "fun-league-6edd6",
          storageBucket: "fun-league-6edd6.appspot.com",
          messagingSenderId: "132854098604",
          appId: "1:132854098604:web:0c0e829ac99624dac38d09",
          measurementId: "G-QJCY28B9HM"
        };
        
        const adminUID = "ujMJ9cUFxxguzNmezN6iF2TQNN52";

        const adminLink = document.getElementById('adminLink');
        const motwContainer = document.getElementById('motwContainer');
        const matchList = document.getElementById('matchList');
        const h2hPlayer1Select = document.getElementById('h2hPlayer1Select');
        const h2hPlayer2Select = document.getElementById('h2hPlayer2Select');
        const h2hButton = document.getElementById('h2hButton');
        const h2hResult = document.getElementById('h2hResult');
        const leagueTabsContainer = document.getElementById('leagueTabsContainer');
        const leagueContentContainer = document.getElementById('leagueContentContainer');
        const userIdDisplay = document.getElementById('userIdDisplay');
        
        let db, auth, userId;
        let players = [], leagues = [], matches = [], clubAssignments = {}, clubs = [];
        let chartInstances = {};
        const chartColors = ['#00b894', '#20c997', '#6c757d', '#17a2b8', '#fd7e14', '#6610f2'];

        async function startApp() {
            try {
                const app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);
                await signInAnonymously(auth);
                auth.onAuthStateChanged(user => {
                    if (user) {
                        userId = user.uid;
                        userIdDisplay.textContent = `User ID: ${userId}`;
                        adminLink.classList.toggle('hidden', userId !== adminUID);
                        setupListeners();
                    } else {
                        userIdDisplay.textContent = "Signed Out";
                        adminLink.classList.add('hidden');
                    }
                });
            } catch (error) {
                console.error("Firebase initialization error:", error);
                userIdDisplay.textContent = "Error";
            }
        }
        
        function setupListeners() {
            onSnapshot(collection(db, 'players'), snapshot => {
                players = snapshot.docs.map(doc => doc.data().name);
                renderAllLeagueData();
            });
            onSnapshot(collection(db, 'leagues'), snapshot => {
                leagues = snapshot.docs.map(doc => ({id: doc.id, ...doc.data()}));
                renderAllLeagueData();
            });
            onSnapshot(collection(db, 'matches'), snapshot => {
                matches = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                renderMatchList();
                renderAllLeagueData();
                renderMOTW();
            });
             onSnapshot(collection(db, 'clubs'), snapshot => {
                clubs = snapshot.docs.map(doc => doc.data());
                renderAllLeagueData();
            });
            onSnapshot(collection(db, 'clubAssignments'), snapshot => {
                clubAssignments = {};
                snapshot.forEach(doc => {
                    clubAssignments[doc.id] = doc.data();
                });
                renderAllLeagueData();
            });
        }

        function renderAllLeagueData() {
            if (!leagues.length) return;
            const leagueNames = leagues.map(l => l.name);
            const activeLeague = document.querySelector('.league-tab-button.active')?.dataset.league || (leagueNames.length > 0 ? leagueNames[0] : null);

            leagueTabsContainer.innerHTML = '';
            leagueContentContainer.innerHTML = '';
            Object.values(chartInstances).forEach(chart => chart.destroy());
            chartInstances = {};

            leagueNames.forEach(league => {
                const tabButton = document.createElement('button');
                tabButton.className = 'league-tab-button';
                tabButton.textContent = league;
                tabButton.dataset.league = league;
                if (league === activeLeague) tabButton.classList.add('active');
                tabButton.onclick = () => switchLeagueTab(league);
                leagueTabsContainer.appendChild(tabButton);

                const contentDiv = document.createElement('div');
                contentDiv.id = `content-${league}`;
                contentDiv.className = 'league-content';
                if (league !== activeLeague) contentDiv.classList.add('hidden');
                
                const completedMatches = matches.filter(m => m.league === league && m.status === 'completed').sort((a,b) => a.timestamp - b.timestamp);
                const leaguePlayers = [...new Set(completedMatches.flatMap(m => [m.player1Name, m.player2Name]))];
                
                const standings = calculateLeagueStats(completedMatches, leaguePlayers);
                contentDiv.innerHTML += generateStandingsHTML(league, standings);
                
                const { topScorers, topDefenders } = calculateTopPlayers(completedMatches, leaguePlayers);
                contentDiv.innerHTML += generateTopPlayersHTML(topScorers, topDefenders);
                
                const chartData = calculatePlayerProgress(completedMatches, leaguePlayers);
                contentDiv.innerHTML += `<div class="stats-section"><h2 class="text-2xl mb-4"><span class="icon">üìà</span>Points Progression</h2><canvas id="chart-${league}"></canvas></div>`;

                leagueContentContainer.appendChild(contentDiv);
                
                if (chartData.datasets.length > 0) {
                    renderChart(league, chartData);
                }
            });
             updateH2HDropdowns();
        }

        function switchLeagueTab(leagueName) {
            document.querySelectorAll('.league-tab-button').forEach(btn => btn.classList.toggle('active', btn.dataset.league === leagueName));
            document.querySelectorAll('.league-content').forEach(content => content.classList.toggle('hidden', content.id !== `content-${leagueName}`));
        }

        function calculateLeagueStats(leagueMatches, leaguePlayers) {
            const stats = {};
            leaguePlayers.forEach(p => {
                stats[p] = { player: p, played: 0, wins: 0, draws: 0, losses: 0, gf: 0, ga: 0, gd: 0, points: 0 };
            });

            leagueMatches.forEach(m => {
                const s1 = stats[m.player1Name], s2 = stats[m.player2Name];
                if (!s1 || !s2) return;
                s1.played++; s2.played++;
                s1.gf += m.player1Goals; s1.ga += m.player2Goals;
                s2.gf += m.player2Goals; s2.ga += m.player1Goals;
                s1.gd = s1.gf - s1.ga; s2.gd = s2.gf - s2.ga;

                if (m.player1Goals > m.player2Goals) { s1.wins++; s1.points += 3; s2.losses++; }
                else if (m.player2Goals > m.player1Goals) { s2.wins++; s2.points += 3; s1.losses++; }
                else { s1.draws++; s1.points++; s2.draws++; s2.points++; }
            });
            return Object.values(stats).sort((a, b) => b.points - a.points || b.gd - a.gd || b.gf - a.gf);
        }

        function getRankClass(index) {
            if (index === 0) return 'rank-gold';
            if (index === 1) return 'rank-silver';
            if (index === 2) return 'rank-bronze';
            return '';
        }

        function generateStandingsHTML(leagueName, standings) {
             if (standings.length === 0) return `<div class="standings-section"><h2 class="text-2xl"><span class="icon">üèÜ</span>${leagueName} Standings</h2><p>No matches played yet in this league.</p></div>`;
             return `<div class="standings-section">
                <h2 class="text-2xl mb-4"><span class="icon">üèÜ</span>${leagueName} Standings</h2>
                <div class="table-container">
                    <table class="w-full"><thead><tr>
                        <th>Rank</th><th>Player</th><th>Club</th><th>P</th><th>W</th><th>D</th><th>L</th><th>GF</th><th>GA</th><th>GD</th><th>Pts</th>
                    </tr></thead><tbody>
                    ${standings.map((p, i) => {
                        const clubName = clubAssignments[leagueName]?.[p.player] || 'N/A';
                        const club = clubs.find(c => c.name === clubName);
                        const clubLogo = club?.logoUrl || 'https://placehold.co/24x24/e9ecef/495057?text=?';

                        return `
                        <tr class="${getRankClass(i)}">
                            <td>${i + 1}</td>
                            <td><a href="profile.html?player=${encodeURIComponent(p.player)}" class="player-name-link">${p.player}</a></td>
                            <td><img src="${clubLogo}" alt="${clubName}" class="club-logo-sm" title="${clubName}"></td>
                            <td>${p.played}</td><td>${p.wins}</td>
                            <td>${p.draws}</td><td>${p.losses}</td><td>${p.gf}</td>
                            <td>${p.ga}</td><td>${p.gd}</td><td class="font-bold">${p.points}</td>
                        </tr>`
                    }).join('')}
                    </tbody></table>
                </div>
            </div>`;
        }

        function calculatePlayerProgress(leagueMatches, leaguePlayers) {
            const progressData = { labels: [], datasets: [] };
            let maxGames = 0;
            leaguePlayers.forEach((player, index) => {
                const playerMatches = leagueMatches.filter(m => m.player1Name === player || m.player2Name === player);
                if (playerMatches.length === 0) return;
                let currentPoints = 0;
                const pointsHistory = [0];
                playerMatches.forEach(m => {
                    const isPlayer1 = m.player1Name === player;
                    const pGoals = isPlayer1 ? m.player1Goals : m.player2Goals;
                    const oGoals = isPlayer1 ? m.player2Goals : m.player1Goals;
                    if (pGoals > oGoals) currentPoints += 3;
                    else if (pGoals === oGoals) currentPoints += 1;
                    pointsHistory.push(currentPoints);
                });
                progressData.datasets.push({
                    label: player, data: pointsHistory,
                    borderColor: chartColors[index % chartColors.length],
                    backgroundColor: chartColors[index % chartColors.length] + '33',
                    fill: false, tension: 0.1
                });
                if (playerMatches.length > maxGames) maxGames = playerMatches.length;
            });
            progressData.labels = Array.from({ length: maxGames + 1 }, (_, i) => `Game ${i}`);
            return progressData;
        }

        function renderChart(leagueName, chartData) {
            const ctx = document.getElementById(`chart-${leagueName}`)?.getContext('2d');
            if(!ctx) return;
            const textColor = '#333';
            const gridColor = '#e9ecef';
            chartInstances[leagueName] = new Chart(ctx, {
                type: 'line', data: chartData,
                options: {
                    scales: { 
                        y: { beginAtZero: true, ticks: { color: textColor }, grid: { color: gridColor} }, 
                        x: { ticks: { color: textColor }, grid: { color: gridColor} } 
                    },
                    plugins: { legend: { labels: { color: textColor } } }
                }
            });
        }
        
        function calculateTopPlayers(leagueMatches, leaguePlayers) {
            const stats = {};
            leaguePlayers.forEach(p => { stats[p] = { player: p, played: 0, gf: 0, ga: 0 }; });
            leagueMatches.forEach(m => {
                stats[m.player1Name].played++; stats[m.player2Name].played++;
                stats[m.player1Name].gf += m.player1Goals; stats[m.player1Name].ga += m.player2Goals;
                stats[m.player2Name].gf += m.player2Goals; stats[m.player2Name].ga += m.player1Goals;
            });
            const allStats = Object.values(stats).filter(p => p.played > 0);
            const topScorers = [...allStats].sort((a,b) => b.gf - a.gf).slice(0, 3);
            const topDefenders = [...allStats].sort((a,b) => a.ga - b.ga).slice(0, 3);
            return { topScorers, topDefenders };
        }
        
        function generateTopPlayersHTML(topScorers, topDefenders) {
             return `<div class="flex flex-col md:flex-row gap-4">
                <div class="stats-section flex-1">
                    <h2 class="text-2xl mb-4"><span class="icon">‚öΩ</span>Top Goal Scorers</h2>
                    <div class="table-container">
                        <table class="w-full"><thead><tr><th>Rank</th><th>Player</th><th>Goals</th></tr></thead><tbody>
                            ${topScorers.map((p, i) => `<tr><td>${i+1}</td><td><a href="profile.html?player=${encodeURIComponent(p.player)}" class="player-name-link">${p.player}</a></td><td class="font-bold">${p.gf}</td></tr>`).join('')}
                        </tbody></table>
                    </div>
                </div>
                <div class="stats-section flex-1">
                    <h2 class="text-2xl mb-4"><span class="icon">üõ°Ô∏è</span>Top Defenders</h2>
                    <div class="table-container">
                        <table class="w-full"><thead><tr><th>Rank</th><th>Player</th><th>Goals Against</th></tr></thead><tbody>
                            ${topDefenders.map((p, i) => `<tr><td>${i+1}</td><td><a href="profile.html?player=${encodeURIComponent(p.player)}" class="player-name-link">${p.player}</a></td><td class="font-bold">${p.ga}</td></tr>`).join('')}
                        </tbody></table>
                    </div>
                </div>
            </div>`;
        }
        
        function renderMOTW() {
            const motw = matches.find(m => m.isMOTW);
            if(motw) {
                motwContainer.innerHTML = `
                    <h2 class="text-2xl mb-2 text-center">‚òÖ Match of the Week ‚òÖ</h2>
                    <div class="text-center">
                        <p class="text-lg">${motw.league}</p>
                        <p class="text-3xl font-bold my-2">
                            <a href="profile.html?player=${encodeURIComponent(motw.player1Name)}" class="player-name-link">${motw.player1Name}</a>
                            <span class="mx-4">${motw.player1Goals} - ${motw.player2Goals}</span>
                            <a href="profile.html?player=${encodeURIComponent(motw.player2Name)}" class="player-name-link">${motw.player2Name}</a>
                        </p>
                    </div>`;
                motwContainer.classList.remove('hidden');
            } else {
                motwContainer.classList.add('hidden');
            }
        }

        function renderMatchList() {
            matchList.innerHTML = [...matches].filter(m => m.status === 'completed').sort((a,b) => b.timestamp - a.timestamp).map(m => `
                <div class="match-item ${m.isMOTW ? 'match-of-the-week-item' : ''}">
                    <span>${m.league}: ${m.player1Name} <b>${m.player1Goals}</b> - <b>${m.player2Goals}</b> ${m.player2Name}</span>
                </div>`).join('') || '<p>No matches in the archive.</p>';
        }

        function updateH2HDropdowns() {
            const allPlayers = [...players].sort();
            const opts = allPlayers.map(p => `<option value="${p}">${p}</option>`).join('');
            h2hPlayer1Select.innerHTML = `<option value="">Select Player 1</option>${opts}`;
            h2hPlayer2Select.innerHTML = `<option value="">Select Player 2</option>${opts}`;
        }

        h2hButton.addEventListener('click', () => {
            const p1 = h2hPlayer1Select.value;
            const p2 = h2hPlayer2Select.value;
            if (!p1 || !p2 || p1 === p2) {
                h2hResult.innerHTML = '<p>Please select two different players.</p>';
                return;
            }

            const h2hMatches = matches.filter(m => 
                m.status === 'completed' &&
                ((m.player1Name === p1 && m.player2Name === p2) || (m.player1Name === p2 && m.player2Name === p1))
            );

            if (h2hMatches.length === 0) {
                 h2hResult.innerHTML = `<p>No matches played between ${p1} and ${p2}.</p>`;
                 return;
            }

            let p1Wins = 0, p2Wins = 0, draws = 0;
            let p1TotalGoals = 0, p2TotalGoals = 0;
            let p1BiggestWin = { diff: 0, score: 'N/A' };
            let p2BiggestWin = { diff: 0, score: 'N/A' };

            h2hMatches.forEach(m => {
                const isP1Player1 = m.player1Name === p1;
                const p1Goals = isP1Player1 ? m.player1Goals : m.player2Goals;
                const p2Goals = isP1Player1 ? m.player2Goals : m.player1Goals;
                
                p1TotalGoals += p1Goals;
                p2TotalGoals += p2Goals;

                if (p1Goals > p2Goals) {
                    p1Wins++;
                    if (p1Goals - p2Goals > p1BiggestWin.diff) {
                        p1BiggestWin = { diff: p1Goals - p2Goals, score: `${p1Goals} - ${p2Goals}` };
                    }
                } else if (p2Goals > p1Goals) {
                    p2Wins++;
                     if (p2Goals - p1Goals > p2BiggestWin.diff) {
                        p2BiggestWin = { diff: p2Goals - p1Goals, score: `${p2Goals} - ${p1Goals}` };
                    }
                } else {
                    draws++;
                }
            });

            h2hResult.innerHTML = `
                <div class="h2h-player-stats">
                    <p class="h2h-player-name">${p1}</p>
                    <p class="h2h-stat-value">${p1Wins}</p>
                    <p class="h2h-stat-label">Wins</p>
                    <p class="h2h-stat-value mt-4">${p1TotalGoals}</p>
                    <p class="h2h-stat-label">Goals Scored</p>
                    <p class="h2h-stat-value mt-4">${p1BiggestWin.score}</p>
                    <p class="h2h-stat-label">Biggest Win</p>
                </div>
                <div class="h2h-vs-divider">
                    <p>${draws}</p>
                    <p class="h2h-stat-label text-center">Draws</p>
                </div>
                <div class="h2h-player-stats">
                    <p class="h2h-player-name">${p2}</p>
                     <p class="h2h-stat-value">${p2Wins}</p>
                    <p class="h2h-stat-label">Wins</p>
                    <p class="h2h-stat-value mt-4">${p2TotalGoals}</p>
                    <p class="h2h-stat-label">Goals Scored</p>
                    <p class="h2h-stat-value mt-4">${p2BiggestWin.score}</p>
                    <p class="h2h-stat-label">Biggest Win</p>
                </div>
            `;
        });
        
        document.body.addEventListener('click', (e) => {
            if (e.target.matches('.cancel-button')) {
                e.target.closest('.modal').style.display = 'none';
            }
        });
        
        document.addEventListener('DOMContentLoaded', startApp);
    </script>
</body>
</html>
